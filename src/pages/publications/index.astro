---
import BaseHead from "@/components/BaseHead.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import FormattedDate from "@/components/FormattedDate.astro";
import { SITE_TITLE } from "../../consts";
import { getCollection } from "astro:content";

const pubs = (await getCollection("publications")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={`${SITE_TITLE} | Publications`} description="Publications" />
  </head>
  <body>
    <Header />
    <main class="container mx-auto md:px-10 px-4 py-20 max-w-[940px]">
      <h1 class="text-4xl font-bold">Publications</h1>

      <ul class="mt-10 flex flex-col gap-6">
        {pubs.map((p) => (
          <li class="rounded-3xl border-1 border-black shadow-card hover:shadow-hover transition px-6 py-6">
            <a href={`/publications/${p.id}/`} class="block">
              <h2 class="text-xl font-semibold">{p.data.title}</h2>

              <div class="mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-sm">
                <span class="font-medium">{p.data.venue}</span>
                <span class="opacity-60">â€¢</span>
                <span class="font-light">
                  <FormattedDate date={p.data.pubDate} />
                </span>
              </div>

              {p.data.abstract && <p class="mt-3 text-sm opacity-80">{p.data.abstract}</p>}
            </a>
          </li>
        ))}
      </ul>
    </main>
    <Footer />
  </body>
</html>
